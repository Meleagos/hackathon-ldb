schema: '2.0'
stages:
  train:
    cmd: python train.py
    deps:
    - path: data
      md5: aa8288eac926ff38b230ed8d5e1dfd23.dir
      size: 359250756
      nfiles: 2035
    - path: requirements.txt
      md5: 5e4668031b7a851e85559535ee915bc6
      size: 18
    - path: train.py
      md5: 5ca8bcdcff40d2eea929628131aa53c6
      size: 3741
    params:
      params.yaml:
        epochs: 100
    outs:
    - path: dvclive.json
      md5: fb48cb7d9231c8950c9f1037c7f7157d
      size: 211
    - path: dvclive/scalars/eval/accuracy.tsv
      md5: 115585e5c68f116986893c913752ce1a
      size: 3713
    - path: dvclive/scalars/eval/loss.tsv
      md5: d09b93bffe0323eeccae0f9ae4e475f7
      size: 3696
    - path: dvclive/scalars/train/accuracy.tsv
      md5: 76084979ee920257c6c73ff68996212a
      size: 3719
    - path: dvclive/scalars/train/loss.tsv
      md5: 074cfb054a2fd24a4d94029d6227530b
      size: 3720
    - path: evaluation.json
      md5: ceefa60b2367eb5b2979dc14b5156f02
      size: 138
    - path: model
      md5: 44f4cd1f419cc1b1c1322aa2a778b251.dir
      size: 2784925
      nfiles: 3
  inference:
    cmd: python inference.py ./data
    deps:
    - path: data
      md5: aa8288eac926ff38b230ed8d5e1dfd23.dir
      size: 359250756
      nfiles: 2035
    - path: inference.py
      md5: 59426c0b1777dcfc0c8a340b0550e487
      size: 2866
    - path: model
      md5: 44f4cd1f419cc1b1c1322aa2a778b251.dir
      size: 2784925
      nfiles: 3
    outs:
    - path: predictions
      md5: f96be32a4dfa2d6626bf387bb216ef53.dir
      size: 440862
      nfiles: 2005
  misclassification:
    cmd:
    - ldb index predictions/ --annotation-update merge
    - ldb instantiate ds:root --query 'inference.confidence > `0.9` && label != inference.label'
      --target ./mispredicted
    - rm -f mispredicted/*.json
    deps:
    - path: predictions
      md5: f96be32a4dfa2d6626bf387bb216ef53.dir
      size: 440862
      nfiles: 2005
    outs:
    - path: mispredicted/
      md5: 3d898e3174b1269c5ea9a9dc7aab26b8.dir
      size: 4588927
      nfiles: 29
